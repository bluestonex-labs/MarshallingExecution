sap.ui.define(["sap/ui/core/mvc/Controller","sap/ndc/BarcodeScanner","sap/m/MessageToast","sap/m/MessageBox"],(e,a,t,o)=>{"use strict";return e.extend("com.sysco.wm.marshallexecutionui.marshallexecutionui.controller.scanninglabel",{onInit(){var e=this.getOwnerComponent().getManifestEntry("/sap.app/id");var a=e.replaceAll(".","/");this.appModulePath=jQuery.sap.getModulePath(a);var t=this.getOwnerComponent().getRouter();this.oBundle=this.getOwnerComponent().getModel("i18n").getResourceBundle()},navBack:function(){sap.ui.core.UIComponent.getRouterFor(this).navTo("Routescanlabel")},onScanSuccess:function(e){var a=this.getView().getModel("i18n").getResourceBundle();var t=a.getText("scanCancelled");if(e.getParameter("cancelled")){sap.m.MessageToast.show(t,{duration:1e3})}else{if(e.getParameter("text")){var o=this.getView().byId("inCageID");o.setValue(e.getParameter("text"));o.fireSubmit()}}},onScanFail:function(e){sap.m.MessageBox.show("Scan failed: "+e.getParameter("message"))},onCageIDInput:function(e){var a=[];var t=this.getView().byId("inCageID").getValue();if(t==""){return}var o=this.getOwnerComponent().getModel("SuggestedMoveData").getData();var s=o.data.value;var n=s.filter(e=>e.To_Marshalling.ID==t);n.forEach(e=>{a.push(e?.To_Marshalling?.ID)});this._allData=a;var i=new sap.ui.model.json.JSONModel({fil:n});this.getView().setModel(i,"oScanPalletForConfirmMove");var r=this.getView();if(!this._oWrapDialogs){this._oWrapDialogs=sap.ui.xmlfragment(r.getId(),"com.sysco.wm.marshallexecutionui.marshallexecutionui.fragment.wrapDialog",this);r.addDependent(this._oWrapDialogs)}this._oWrapDialogs.open()},_closeWrapDialogAccept:function(e){var a=this;if(this._oWrapDialogs){this._oWrapDialogs.close();var t=a.callConfirmMoves();sap.m.MessageBox.information(a.oBundle.getText("lbl"),{actions:[sap.m.MessageBox.Action.OK],onClose:function(e){if(e===sap.m.MessageBox.Action.OK){sap.ui.core.UIComponent.getRouterFor(this).navTo("Routescanlabel")}}.bind(a)})}},callConfirmMoves:function(){return new Promise((e,a)=>{var t=this;var o=sap.ui.getCore().getConfiguration().getLocale();var s=o.language;var n=this.appModulePath+"/marshallingservices/Marshalling/confirmMove";var i={IDs:[t._allData[0]]};$.ajax({url:n,beforeSend:function(e){e.setRequestHeader("Accept-Language",s)},method:"POST",contentType:"application/json",data:JSON.stringify(i),headers:{Accept:"application/json"},success:function(a){e(a.value)},error:function(e){a(e)}})})},_closeWrapDialogDecline:function(e){if(this._oWrapDialogs){this._oWrapDialogs.close()}}})});
//# sourceMappingURL=scanninglabel.controller.js.map