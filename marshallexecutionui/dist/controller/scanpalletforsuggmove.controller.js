sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox"],(e,o)=>{"use strict";return e.extend("com.sysco.wm.marshallexecutionui.marshallexecutionui.controller.scanpalletforsuggmove",{onInit(){var e=this.getOwnerComponent().getManifestEntry("/sap.app/id");var o=e.replaceAll(".","/");this.appModulePath=jQuery.sap.getModulePath(o);var t=this.getOwnerComponent().getRouter();this.oBundle=this.getOwnerComponent().getModel("i18n").getResourceBundle();this.getOwnerComponent().getRouter().getRoute("scanpalletforsuggmove").attachPatternMatched(this._onPalletIdMatched,this)},navBack:function(){sap.ui.core.UIComponent.getRouterFor(this).navTo("suggestedmoves")},_onPalletIdMatched:function(){var e=this.getOwnerComponent().getModel("scanPalletForSuggMove").getData().fil[0];var o=new sap.ui.model.json.JSONModel(e);this.getView().setModel(o,"scanPalMove")},onConfirmMove:function(e){var o=this.getView();if(!this._oWrapDialog){this._oWrapDialog=sap.ui.xmlfragment(o.getId(),"com.sysco.wm.marshallexecutionui.marshallexecutionui.fragment.wrapDialog",this);o.addDependent(this._oWrapDialog)}this._oWrapDialog.open()},_closeWrapDialogAccept:async function(e){var o=this;if(this._oWrapDialog){this._oWrapDialog.close();var t=o.callConfirmMoves();sap.m.MessageBox.information(o.oBundle.getText("lbl"),{actions:[sap.m.MessageBox.Action.OK],onClose:function(e){if(e===sap.m.MessageBox.Action.OK){sap.ui.core.UIComponent.getRouterFor(this).navTo("suggestedmoves")}}.bind(o)})}},callConfirmMoves:function(){return new Promise((e,o)=>{var t=this;var a=sap.ui.getCore().getConfiguration().getLocale();var n=a.language;var i=this.getView().getModel("scanPalMove").oData;var s=this.appModulePath+"/marshallingservices/Marshalling/confirmMove";var r={IDs:[i.To_Marshalling.ID]};$.ajax({url:s,beforeSend:function(e){e.setRequestHeader("Accept-Language",n)},method:"POST",contentType:"application/json",data:JSON.stringify(r),headers:{Accept:"application/json"},success:function(o){e(o.value)},error:function(e){o(e)}})})},_closeWrapDialogDecline:function(e){if(this._oWrapDialog){this._oWrapDialog.close()}}})});
//# sourceMappingURL=scanpalletforsuggmove.controller.js.map