sap.ui.define(["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("com.sysco.wm.marshallexecutionui.marshallexecutionui.controller.suggestedmoves",{onInit:function(){var e=this.getOwnerComponent().getRouter();e.getRoute("suggestedmoves").attachPatternMatched(this._onRouteMatched,this);this.oBundle=this.getOwnerComponent().getModel("i18n").getResourceBundle()},_onRouteMatched:function(){this._pageSize=5;this._currentPage=0;this._currentIndex=0;this.suggestedMovesList()},suggestedMovesList:function(){var e=this.getOwnerComponent().getModel("SuggestedMoveData").getData();var t=[];var a=[];var s=e.data.value;s.forEach(e=>{t.push({CageID:e?.To_Marshalling?.CageID||"",PalletID:e?.To_Marshalling?.PalletID||"",Media:e?.Media?.Description||"",Status:e?.Status?.Description||"",Source:e?.To_Marshalling?.MarshallingBinID?.Description||""})});var i=new sap.ui.model.json.JSONModel({results:t});this.getView().setModel(i,"flattened");this._allData=t;this._updatePagedData()},_updatePagedData:function(){var e=this._currentPage*this._pageSize;var t=e+this._pageSize;var a=this._allData.slice(e,t);var s=new sap.ui.model.json.JSONModel({visibleResults:a});this.getView().setModel(s,"flattened");this.getView().byId("btnUp").setVisible(this._currentPage>0);this.getView().byId("btnDown").setVisible(t<this._allData.length)},onShowMore:function(){var e=Math.ceil(this._allData.length/this._pageSize);if(this._currentPage<e-1){this._currentPage++;this._updatePagedData()}},onShowLess:function(){if(this._currentPage>0){this._currentPage--;this._updatePagedData()}},onItemPress:function(e){var t=this.getOwnerComponent().getModel("SuggestedMoveData").getData();var a=t.data.value;var s=e.getSource();var i=this.getView().getModel("flattened").getData().visibleResults[e.getSource()._aSelectedPaths[0].split("/")[e.getSource()._aSelectedPaths[0].split("/").length-1]];var n=a.filter(e=>e.To_Marshalling.CageID==i.CageID||e.To_Marshalling.PalletID===i.PalletID);var o=new sap.ui.model.json.JSONModel({fil:n});this.getOwnerComponent().setModel(o,"scanPalletForSuggMove");sap.ui.core.UIComponent.getRouterFor(this).navTo("scanpalletforsuggmove")},onsortIds:function(e){var t=e.getSource();var a=t.getIcon();var s=a.includes("ascending");var i=s?"sap-icon://sort-descending":"sap-icon://sort-ascending";t.setIcon(i);var n=this.byId("suggestMovesList");var o=this.byId("suggestMovesLists");var r=new sap.ui.model.Sorter("id",!s);n.getBinding("items").sort(r);o.getBinding("items").sort(r)},navBack:function(){sap.ui.core.UIComponent.getRouterFor(this).navTo("Routescanlabel")},onListItemPress:function(e){var t=this.getOwnerComponent().getRouter();var a=e.getParameter("listItem");var s=a.getBindingContext();var i=s.getObject();var n=new sap.ui.model.json.JSONModel(i);this.getOwnerComponent().setModel(n,"scanPalMove");t.navTo("scanpalletforsuggmove",{id:i.id})}})});
//# sourceMappingURL=suggestedmoves.controller.js.map