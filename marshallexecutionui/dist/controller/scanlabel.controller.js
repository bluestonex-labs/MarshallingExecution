sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ui/core/BusyIndicator","sap/m/MessageBox"],(e,a,t,n,o)=>{"use strict";return e.extend("com.sysco.wm.marshallexecutionui.marshallexecutionui.controller.scanlabel",{onInit(){n.show(500);var e=this.getOwnerComponent().getManifestEntry("/sap.app/id");var a=e.replaceAll(".","/");this.appModulePath=jQuery.sap.getModulePath(a);var o=this;var s=sap.ui.getCore().getConfiguration().getLocale();var r=s.language;$.ajax({url:this.appModulePath+"/marshallingservices/CloudWM/getPlantListForUser()",beforeSend:function(e){e.setRequestHeader("Accept-Language",r)},type:"GET",contentType:"application/json",dataType:"json",async:true,success:function(e,a){n.hide();const t=e.value;t.forEach(function(e,a){if(e.DefaultPlant)o.plant=e.Plant});o.getMarshallingData(o.plant)},error:function(e,a,o){n.hide();t.show(e.responseText)}},this)},getMarshallingData:function(e){var a=this.getOwnerComponent().getManifestEntry("/sap.app/id");var t=a.replaceAll(".","/");this.appModulePath=jQuery.sap.getModulePath(t);var n=sap.ui.getCore().getConfiguration().getLocale();var o=(new Date).toISOString().split("T")[0];var s=new Date;s.setDate(s.getDate()+7);var r=s.toISOString().split("T")[0];var i=n.language;var l=this;var u="/marshallingservices";var c="/Marshalling/PickTaskHeaders?$filter=Plant eq '"+e+"' and DeliveryDate ge '"+o+"' and DeliveryDate le '"+r+"' and To_Marshalling/ID ne null and To_Marshalling/Status_ID ne 'PALLETISED' and To_Marshalling/Status_ID ne 'LOADED'&$select=ID,Route,PickJob&$expand=To_Marshalling($expand=MarshallingBinID($select=ID,Description),SuggestedBinID($select=ID,Description)),Status,Media";var p=this.appModulePath+u+c;$.ajax({url:p,beforeSend:function(e){e.setRequestHeader("Accept-Language",i)},method:"GET",headers:{Accept:"application/json"},success:function(e){var a=new sap.ui.model.json.JSONModel({data:e});l.getOwnerComponent().setModel(a,"SuggestedMoveData")},error:function(e,a){console.log("Error:",e,a)}})},onSuggestedMoves:function(){sap.ui.core.UIComponent.getRouterFor(this).navTo("suggestedmoves")},onScanPallet:function(){sap.ui.core.UIComponent.getRouterFor(this).navTo("scanpallet")},onScanLabel:function(){sap.ui.core.UIComponent.getRouterFor(this).navTo("scanninglabel")},navBack:function(){sap.ui.core.UIComponent.getRouterFor(this).navTo("Routescanlabel")}})});
//# sourceMappingURL=scanlabel.controller.js.map